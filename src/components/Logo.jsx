import React, { useEffect, useRef } from 'react';
import gsap from 'gsap';

const Logo = ({ isOpen }) => {
  const wrapperRef = useRef(null);

  useEffect(() => {
    const letters = Array.from(wrapperRef.current.querySelectorAll("[id^='letter-']")).reverse();
    const rect = wrapperRef.current.querySelector("rect");

    const condensedTargets = [
      { x: 84, y: -4 },
      { x: 89, y: -4 },
      { x: 96, y: -4 },
      { x: 7, y: 28 },
      { x: 13, y: 28 },
      { x: 20, y: 28 },
      { x: -96, y: 60 },
      { x: -89, y: 60 },
      { x: -84, y: 60 },
    ];

    const baseYOffset = 28;

    gsap.set(letters, { y: baseYOffset });

    gsap.to(letters, {
      x: (i) => (isOpen ? 0 : condensedTargets[i].x),
      y: (i) => (isOpen ? baseYOffset : condensedTargets[i].y),
      rotation: () => (isOpen ? 0 : gsap.utils.random(-2, 2)),
      duration: 0.6,
      ease: 'power3.inOut',
    });

    const openWidth = 140;
    const openHeight = 24;
    const condensedSize = 50;
    const centerX = openWidth / 2;
    const centerY = openHeight / 2;

    if (rect) {
      gsap.to(rect, {
        attr: isOpen
          ? {
              width: openWidth,
              height: openHeight,
              rx: 12,
              x: 0,
              y: 0,
            }
          : {
              width: condensedSize,
              height: condensedSize,
              rx: 12,
              x: centerX - condensedSize / 2,
              y: centerY - condensedSize / 2,
            },
        duration: 0.6,
        ease: 'power2.inOut',
      });
    }
  }, [isOpen]);

  return (
<svg
  ref={wrapperRef}
  viewBox="0 -13 140 50"
  style={{ width: '300px', height: '80px', overflow: 'visible' }}
>
  <rect fill="#FF710B" height="24" rx="12" width="140" />

  <g id="letter-0">
    <path d="M129.31 16.4499C129.347 16.5059 129.366 16.5666 129.366 16.6319C129.366 16.7159 129.333 16.7906 129.268 16.8559C129.212 16.9119 129.142 16.9399 129.058 16.9399H125.446C125.231 16.9399 125.063 16.8652 124.942 16.7159L122.506 13.7059V16.5619C122.506 16.6646 122.469 16.7532 122.394 16.8279C122.319 16.9026 122.231 16.9399 122.128 16.9399H119.244C119.141 16.9399 119.053 16.9026 118.978 16.8279C118.903 16.7532 118.866 16.6646 118.866 16.5619V7.51789C118.866 7.41523 118.903 7.32656 118.978 7.25189C119.053 7.17723 119.141 7.13989 119.244 7.13989H122.128C122.231 7.13989 122.319 7.17723 122.394 7.25189C122.469 7.32656 122.506 7.41523 122.506 7.51789V10.1499L124.718 7.37789C124.858 7.21923 125.031 7.13989 125.236 7.13989H128.61C128.694 7.13989 128.764 7.17256 128.82 7.23789C128.885 7.29389 128.918 7.36389 128.918 7.44789C128.918 7.52256 128.895 7.58789 128.848 7.64389L125.53 11.6899L129.31 16.4499Z" fill="white" />
  </g>

  <g id="letter-1">
    <path d="M109.618 16.4639C109.496 16.7812 109.286 16.9399 108.988 16.9399H106.342C106.258 16.9399 106.183 16.9119 106.118 16.8559C106.062 16.7906 106.034 16.7159 106.034 16.6319L106.048 16.5479L109.1 7.60189C109.137 7.48056 109.207 7.37323 109.31 7.27989C109.412 7.18656 109.552 7.13989 109.73 7.13989H113.622C113.799 7.13989 113.939 7.18656 114.042 7.27989C114.144 7.37323 114.214 7.48056 114.252 7.60189L117.304 16.5479L117.318 16.6319C117.318 16.7159 117.285 16.7906 117.22 16.8559C117.164 16.9119 117.094 16.9399 117.01 16.9399H114.364C114.065 16.9399 113.855 16.7812 113.734 16.4639L113.384 15.4839H109.968L109.618 16.4639ZM111.676 9.84189L110.682 12.7539H112.67L111.676 9.84189Z" fill="white" />
  </g>

  <g id="letter-2">
    <path d="M104.569 7.13989C104.672 7.13989 104.76 7.17723 104.835 7.25189C104.91 7.32656 104.947 7.41523 104.947 7.51789V9.77189C104.947 9.87456 104.91 9.96323 104.835 10.0379C104.76 10.1126 104.672 10.1499 104.569 10.1499H101.559V16.5619C101.559 16.6646 101.522 16.7532 101.447 16.8279C101.372 16.9026 101.284 16.9399 101.181 16.9399H98.297C98.1943 16.9399 98.1057 16.9026 98.031 16.8279C97.9563 16.7532 97.919 16.6646 97.919 16.5619V10.1499H94.909C94.8063 10.1499 94.7177 10.1126 94.643 10.0379C94.5683 9.96323 94.531 9.87456 94.531 9.77189V7.51789C94.531 7.41523 94.5683 7.32656 94.643 7.25189C94.7177 7.17723 94.8063 7.13989 94.909 7.13989H104.569Z" fill="white" />
  </g>

  <g id="letter-3">
    <path d="M81.1579 12.894C81.1579 14.322 80.6819 15.3767 79.7299 16.058C78.7873 16.7393 77.5273 17.08 75.9499 17.08C74.3726 17.08 73.1079 16.7393 72.1559 16.058C71.2133 15.3767 70.7419 14.3127 70.7419 12.866V11.214C70.7419 10.262 70.9659 9.47333 71.4139 8.848C71.8713 8.21333 72.4919 7.74667 73.2759 7.448C74.0599 7.14933 74.9513 7 75.9499 7C76.9486 7 77.8353 7.14933 78.6099 7.448C79.3939 7.74667 80.0146 8.20867 80.4719 8.834C80.9293 9.45933 81.1579 10.2433 81.1579 11.186V12.894ZM74.5219 13.16C74.5219 13.5427 74.6479 13.8367 74.8999 14.042C75.1613 14.2473 75.5113 14.35 75.9499 14.35C76.3886 14.35 76.7339 14.2473 76.9859 14.042C77.2473 13.8273 77.3779 13.5287 77.3779 13.146V10.934C77.3779 10.5513 77.2473 10.2573 76.9859 10.052C76.7339 9.83733 76.3886 9.73 75.9499 9.73C75.5113 9.73 75.1613 9.83267 74.8999 10.038C74.6479 10.2433 74.5219 10.5373 74.5219 10.92V13.16Z" fill="white" />
  </g>

  <g id="letter-4">
    <path d="M65.9595 14.0699H68.4935C68.5962 14.0699 68.6848 14.1072 68.7595 14.1819C68.8342 14.2566 68.8715 14.3452 68.8715 14.4479V16.5619C68.8715 16.6646 68.8342 16.7532 68.7595 16.8279C68.6848 16.9026 68.5962 16.9399 68.4935 16.9399H59.6175C59.5148 16.9399 59.4262 16.9026 59.3515 16.8279C59.2768 16.7532 59.2395 16.6646 59.2395 16.5619V14.4479C59.2395 14.3452 59.2768 14.2566 59.3515 14.1819C59.4262 14.1072 59.5148 14.0699 59.6175 14.0699H62.1795V10.0099H59.6175C59.5148 10.0099 59.4262 9.97256 59.3515 9.89789C59.2768 9.82323 59.2395 9.73456 59.2395 9.63189V7.51789C59.2395 7.41523 59.2768 7.32656 59.3515 7.25189C59.4262 7.17723 59.5148 7.13989 59.6175 7.13989H68.4935C68.5962 7.13989 68.6848 7.17723 68.7595 7.25189C68.8342 7.32656 68.8715 7.41523 68.8715 7.51789V9.63189C68.8715 9.73456 68.8342 9.82323 68.7595 9.89789C68.6848 9.97256 68.5962 10.0099 68.4935 10.0099H65.9595V14.0699Z" fill="white" />
  </g>

  <g id="letter-5">
    <path d="M65.9595 14.0699H68.4935C68.5962 14.0699 68.6848 14.1072 68.7595 14.1819C68.8342 14.2566 68.8715 14.3452 68.8715 14.4479V16.5619C68.8715 16.6646 68.8342 16.7532 68.7595 16.8279C68.6848 16.9026 68.5962 16.9399 68.4935 16.9399H59.6175C59.5148 16.9399 59.4262 16.9026 59.3515 16.8279C59.2768 16.7532 59.2395 16.6646 59.2395 16.5619V14.4479C59.2395 14.3452 59.2768 14.2566 59.3515 14.1819C59.4262 14.1072 59.5148 14.0699 59.6175 14.0699H62.1795V10.0099H59.6175C59.5148 10.0099 59.4262 9.97256 59.3515 9.89789C59.2768 9.82323 59.2395 9.73456 59.2395 9.63189V7.51789C59.2395 7.41523 59.2768 7.32656 59.3515 7.25189C59.4262 7.17723 59.5148 7.13989 59.6175 7.13989H68.4935C68.5962 7.13989 68.6848 7.17723 68.7595 7.25189C68.8342 7.32656 68.8715 7.41523 68.8715 7.51789V9.63189C68.8715 9.73456 68.8342 9.82323 68.7595 9.89789C68.6848 9.97256 68.5962 10.0099 68.4935 10.0099H65.9595V14.0699Z" fill="white" />
  </g>

  <g id="letter-6">
    <path d="M52.1189 7.13989C53.6962 7.13989 54.9562 7.48056 55.8989 8.16189C56.8509 8.84323 57.3269 9.89789 57.3269 11.3259V12.7539C57.3269 14.2099 56.8556 15.2739 55.9129 15.9459C54.9796 16.6086 53.7149 16.9399 52.1189 16.9399H47.6529C47.5502 16.9399 47.4616 16.9026 47.3869 16.8279C47.3122 16.7532 47.2749 16.6646 47.2749 16.5619V7.51789C47.2749 7.41523 47.3122 7.32656 47.3869 7.25189C47.4616 7.17723 47.5502 7.13989 47.6529 7.13989H52.1189ZM52.1889 14.2099C52.6276 14.2099 52.9729 14.1072 53.2249 13.9019C53.4862 13.6872 53.6169 13.3886 53.6169 13.0059V11.0739C53.6169 10.6912 53.4862 10.3972 53.2249 10.1919C52.9729 9.97723 52.6276 9.86989 52.1889 9.86989H50.9149V14.2099H52.1889Z" fill="white" />
  </g>

  <g id="letter-7">
    <path d="M40.2664 17.0799C38.6984 17.0799 37.4524 16.7392 36.5284 16.0579C35.6137 15.3766 35.1564 14.3126 35.1564 12.8659V7.51789C35.1564 7.41523 35.1937 7.32656 35.2684 7.25189C35.343 7.17723 35.4317 7.13989 35.5344 7.13989H38.4604C38.563 7.13989 38.6517 7.17723 38.7264 7.25189C38.801 7.32656 38.8384 7.41523 38.8384 7.51789V13.0899C38.8384 13.4726 38.9644 13.7666 39.2164 13.9719C39.4777 14.1772 39.8277 14.2799 40.2664 14.2799C40.705 14.2799 41.0504 14.1772 41.3024 13.9719C41.5637 13.7666 41.6944 13.4726 41.6944 13.0899V7.51789C41.6944 7.41523 41.7317 7.32656 41.8064 7.25189C41.881 7.17723 41.9697 7.13989 42.0724 7.13989H44.9984C45.101 7.13989 45.1897 7.17723 45.2644 7.25189C45.339 7.32656 45.3764 7.41523 45.3764 7.51789V12.8659C45.3764 14.3126 44.9144 15.3766 43.9904 16.0579C43.0757 16.7392 41.8344 17.0799 40.2664 17.0799Z" fill="white" />
  </g>

  <g id="letter-8">
    <path d="M33.2018 7.13989C33.3045 7.13989 33.3932 7.17723 33.4678 7.25189C33.5425 7.32656 33.5798 7.41523 33.5798 7.51789V9.77189C33.5798 9.87456 33.5425 9.96323 33.4678 10.0379C33.3932 10.1126 33.3045 10.1499 33.2018 10.1499H30.1918V16.5619C30.1918 16.6646 30.1545 16.7532 30.0798 16.8279C30.0052 16.9026 29.9165 16.9399 29.8138 16.9399H26.9298C26.8272 16.9399 26.7385 16.9026 26.6638 16.8279C26.5892 16.7532 26.5518 16.6646 26.5518 16.5619V10.1499H23.5418C23.4392 10.1499 23.3505 10.1126 23.2758 10.0379C23.2012 9.96323 23.1638 9.87456 23.1638 9.77189V7.51789C23.1638 7.41523 23.2012 7.32656 23.2758 7.25189C23.3505 7.17723 23.4392 7.13989 23.5418 7.13989H33.2018Z" fill="white"/></svg><svg id="letter-8" style="overflow: visible;" viewBox="0 0 140 24" xmlns="http://www.w3.org/2000/svg"><path d="M17.2474 10.696C18.2741 10.808 19.0954 10.99 19.7114 11.242C20.3367 11.494 20.7894 11.8253 21.0694 12.236C21.3494 12.6467 21.4894 13.16 21.4894 13.776C21.4894 14.448 21.2701 15.036 20.8314 15.54C20.4021 16.0347 19.8047 16.4173 19.0394 16.688C18.2741 16.9493 17.4014 17.08 16.4214 17.08C15.3294 17.08 14.4054 16.9447 13.6494 16.674C12.8934 16.4033 12.3287 16.044 11.9554 15.596C11.5821 15.1387 11.3954 14.6393 11.3954 14.098C11.3954 14.0047 11.4234 13.93 11.4794 13.874C11.5447 13.818 11.6241 13.79 11.7174 13.79H14.5874C14.7834 13.79 14.9421 13.8507 15.0634 13.972C15.2221 14.1213 15.3994 14.224 15.5954 14.28C15.7914 14.3267 16.0667 14.35 16.4214 14.35C17.3081 14.35 17.7514 14.2147 17.7514 13.944C17.7514 13.832 17.6907 13.7387 17.5694 13.664C17.4574 13.58 17.2521 13.51 16.9534 13.454C16.6641 13.3887 16.2347 13.3233 15.6654 13.258C14.3867 13.1087 13.4067 12.7913 12.7254 12.306C12.0441 11.8113 11.7034 11.116 11.7034 10.22C11.7034 9.58533 11.8947 9.02533 12.2774 8.54C12.6601 8.05467 13.2014 7.67667 13.9014 7.406C14.6107 7.13533 15.4321 7 16.3654 7C17.3361 7 18.1854 7.154 18.9134 7.462C19.6414 7.76067 20.1967 8.134 20.5794 8.582C20.9621 9.03 21.1534 9.46867 21.1534 9.898C21.1534 9.99133 21.1207 10.066 21.0554 10.122C20.9994 10.178 20.9201 10.206 20.8174 10.206H17.8074C17.6487 10.206 17.5041 10.15 17.3734 10.038C17.2707 9.94467 17.1494 9.87 17.0094 9.814C16.8694 9.758 16.6547 9.73 16.3654 9.73C15.7401 9.73 15.4274 9.86067 15.4274 10.122C15.4274 10.262 15.5487 10.374 15.7914 10.458C16.0341 10.5327 16.5194 10.612 17.2474 10.696Z" fill="white" />
  </g>
</svg>
  );
};

export default Logo;
